"use strict";window.XdUtils=window.XdUtils||function(){function a(a,b){var c,d=b||{};for(c in a)a.hasOwnProperty(c)&&(d[c]=a[c]);return d}return{extend:a}}(),function(){function a(a){return 1!==m.length||"*"!==m[0]&&""!==m[0]?0===m.length?!0:m.length>0&&m.indexOf(a)>-1?!0:(console.warn("xdLocalStorage origin denied access. Define allowed origins in iframe 'accepted-origins' attribute",a,m),!1):!0}function b(a,b,c){c=c||"*";var d=XdUtils.extend(b,{namespace:j});d.id=a,parent.postMessage(JSON.stringify(d),c)}function c(a,c,d){var e=localStorage.getItem(c),f={key:c,value:e};b(a,f,d)}function d(a,c,d,e){localStorage.setItem(c,d);var f=localStorage.getItem(c),g={success:f===d};b(a,g,e)}function e(a,c,d){localStorage.removeItem(c),b(a,{},d)}function f(a,c,d){var e=localStorage.key(c);b(a,{key:e},d)}function g(a,c){localStorage.clear(),b(a,{},c)}function h(b){if(a(b.origin)){var h;try{h=JSON.parse(b.data)}catch(i){}h&&h.namespace===j&&("set"===h.action?d(h.id,h.key,h.value,b.origin):"get"===h.action?c(h.id,h.key,b.origin):"remove"===h.action?e(h.id,h.key,b.origin):"key"===h.action?f(h.id,h.key,b.origin):"clear"===h.action&&g(h.id,b.origin))}}function i(){var a={namespace:j,id:"iframe-ready",localStorageSupported:n};parent.postMessage(JSON.stringify(a),"*")}var j="cross-domain-local-message",k=document.getElementById("post-message-api"),l=k&&k.getAttribute("accepted-origins")||"",m=l.split(","),n=function(){try{var a="localStorage"in window&&null!==window.localStorage;if(a){var b="__"+Math.round(1e7*Math.random());localStorage.setItem(b,""),localStorage.removeItem(b)}return a}catch(c){return!1}}();window.addEventListener?window.addEventListener("message",h,!1):window.attachEvent("onmessage",h),i()}();
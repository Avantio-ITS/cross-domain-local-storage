"use strict";window.XdUtils=window.XdUtils||function(){function a(a,b){var c,d=b||{};for(c in a)a.hasOwnProperty(c)&&(d[c]=a[c]);return d}return{extend:a}}(),function(){function a(a){return 1!==n.length||"*"!==n[0]&&""!==n[0]?0===n.length?!0:n.length>0&&n.indexOf(a)>-1?!0:(console.warn("xdLocalStorage origin denied access. Define allowed origins in iframe 'accepted-origins' attribute",a,n),!1):!0}function b(a,b,c){c=c||"*";var d=XdUtils.extend(b,{namespace:k});d.id=a,parent.postMessage(JSON.stringify(d),c)}function c(a,c,d){var e=localStorage.getItem(c),f={key:c,value:e};b(a,f,d)}function d(a,c,d,e){localStorage.setItem(c,d);var f=localStorage.getItem(c),g={success:f===d};b(a,g,e)}function e(a,c,d){localStorage.removeItem(c),b(a,{},d)}function f(a,c,d){var e=localStorage.key(c);b(a,{key:e},d)}function g(a,c){localStorage.clear(),b(a,{},c)}function h(a,c,d){var e=[],f=c?c.length:0;for(var g in localStorage)c?g.substr(0,f)===c&&e.push(g):e.push(g);b(a,{keys:e},d)}function i(b){if(a(b.origin)){var i;try{i=JSON.parse(b.data)}catch(j){}i&&i.namespace===k&&("set"===i.action?d(i.id,i.key,i.value,b.origin):"get"===i.action?c(i.id,i.key,b.origin):"remove"===i.action?e(i.id,i.key,b.origin):"key"===i.action?f(i.id,i.key,b.origin):"clear"===i.action?g(i.id,b.origin):"getAllKeys"===i.action&&h(i.id,i.key,b.origin))}}function j(){var a={namespace:k,id:"iframe-ready",localStorageSupported:o};parent.postMessage(JSON.stringify(a),"*")}var k="cross-domain-local-message",l=document.getElementById("post-message-api"),m=l&&l.getAttribute("accepted-origins")||"",n=m.split(","),o=function(){try{var a="localStorage"in window&&null!==window.localStorage;if(a){var b="__"+Math.round(1e7*Math.random());localStorage.setItem(b,""),localStorage.removeItem(b)}return a}catch(c){return!1}}();window.addEventListener?window.addEventListener("message",i,!1):window.attachEvent("onmessage",i),j()}();